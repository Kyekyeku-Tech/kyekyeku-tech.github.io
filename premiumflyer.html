<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kyekyeku Tech Flyer Generator</title>
  <style>
      body {
    font-family: 'Poppins', sans-serif;
    html, body {
    margin: 0;
    padding: 0;
    background: transparent !important;
  }
    display: flex;
    justify-content: center;
    align-items: center;
    
}
 
    /* Form Container */
.form-container {
    width: 90%;
    max-width: 450px;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 12px 4px rgba(0, 0, 0, 0.973);
    text-align: center;
    backdrop-filter: blur(10px);
    animation: fadeIn 0.8s ease-in-out;
}

.form-container h2 {
    color: #fc0505;
    margin-bottom: 20px;
    font-weight: 700;
}

.form-container img {
    position: absolute;
    top: 10px;
    right: 0px;
    width: 150px; /* Adjust size as needed */
    height: auto;
}

.form-container img:hover {
    transform: scale(1.05);
}

/* Form Inputs */
.form-container label {
    display: block;
    text-align: left;
    color: rgb(5, 42, 250);
    font-weight: 500;
    margin-bottom: 5px;
}

.form-container input,
.form-container select,
.form-container button {
    width: 80%;
    padding: 10px;
    margin-bottom: 15px;
    border: 2px solid red;
    border-radius: 8px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.form-container input,
.form-container select {

    font-weight: 500;
}

.form-container input:focus,
.form-container select:focus {
    border-color: #ffd000;
    outline: none;
}

/* Button */
.form-container button {
    background: linear-gradient(45deg, #000, #0905f7);
    color: white;
    font-weight: 700;
    cursor: pointer;
    border: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease-in-out;
}

.form-container button:hover {
    background: linear-gradient(45deg, #0905f7, #000);
    transform: scale(1.05);
}
/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Responsive */
@media (max-width: 480px) {
    .form-container {
        width: 95%;
        padding: 20px;
    }
}

   input, textarea {
      width: 90%;
      padding: 1px;
      margin-top: 2px;
      border-radius: 10px;
      border: 2px solid #fc0303;
      font-size: 16px;
      box-sizing: border-box;
      resize: none; /* Optional: prevent manual resizing */
      overflow-y: hidden; /
   }

    button {
      margin-top: 30px;
      padding: 14px;
      width: 100%;
      background: linear-gradient(135deg, #007bff, #00c6ff);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: linear-gradient(135deg, #0056b3, #0099cc);
    }
    canvas {
      display: none;
      margin: 20px auto;
      border: 2px solid #000;
      background: url('');
      background-size: cover;
    }
    .form-container {
      max-width: 600px;
      margin: 0 auto;
    }
    .download-link {
      display: none;
      margin-top: 20px;
      font-size: 18px;
      color: #00c6ff;
      font-weight: bold;
      text-decoration: none;
    }
    #gradientOptions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff3cd;
    border: 2px dashed #ffcc00;
    border-radius: 12px;
    padding: 10px 15px;
    margin-bottom: 20px;
    font-family: 'Poppins', sans-serif;
    color: #333;
  }

  #gradientOptions  label {
    margin: 0 10px;
    font-weight: 600;
  }

  #gradientOptions  input[type="color"] {
    width: 50px;
    height: 30px;
    border: none;
    cursor: pointer;
    background: transparent;

  }input[type="file"] {
    border: 2px dashed #999;
    padding: 8px;
    border-radius: 8px;
    background: #f9f9f9;
    cursor: pointer;
  }
  </style>
</head>
<body>
  <div class="form-container">
    <img src="my-logo.png" id="containerimge">
    <h1>Flyer Generator</h1>
    <form id="flyerForm">
      <input type="text" id="businessName" placeholder="Business Name" ><br><br>
      <input type="text" id="mobileNumber" placeholder="Mobile Number" ><br><br>
      <input type="text" id="accountName" placeholder="Account Name" ><br><br>
      <input type="text" id="afaPrice" placeholder="AFA Registration Price" ><br><br>
      <label for="mtnList" style="color: #ffa600;">MTN List (You can Edit):</label>
      <textarea id="mtnList" placeholder="MTN List"></textarea><br><br>
      <label for="atList">AT List (You can Edit):</label>
      <textarea id="atList" placeholder="AT List"></textarea><br><br>
      <label for="telecelList" style="color: #fc0303;">Telecel List (You can Edit):</label>
      <textarea id="telecelList" placeholder="Telecel List"></textarea><br><br>
    
<label for="bgType">üñºÔ∏è Select Background Type:</label>
<select id="bgType">
  <option value="gradient">Gradient Background</option>
  <option value="image">Upload Image Background</option>
</select><br><br>

<div id="gradientOptions">
  <label>üé® Start Color:</label>
  <input type="color" id="startColor" value="#ffd700"><br><br>
  <label>üé® End Color:</label>
  <input type="color" id="endColor" value="#000000"><br><br>
</div>

<div id="imageOptions" style="display: none;">
  <label>üìÅ Upload Background Image:</label>
  <input type="file" id="bgImage" accept="image/*"><br><br>
</div>


<label>Background Direction:</label>
<select id="gradientDirection">
  <option value="vertical">Top to Bottom</option>
  <option value="horizontal">Left to Right</option>
  <option value="diagonal">Top Left to Bottom Right</option>
</select><br><br>

      <button type="submit">Generate Flyer</button>
    </form>
  </div>
  <canvas id="flyerCanvas" width="1080" height="1080"></canvas>
  <a id="downloadLink" class="download-link">‚¨áÔ∏è Download Flyer</a>

  <script>
    
    const canvas = document.getElementById("flyerCanvas");
  const ctx = canvas.getContext("2d");

 function drawSection(ctx, title, list, x, color, logoUrl) {
  const boxY = 200;
  const lineCount = list.split("\n").length;
  const lineHeight = 28;
  const boxWidth = 280;
  const boxHeight = 130 + (lineCount * lineHeight); // Dynamically based on content

  // Draw background box
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.moveTo(x + 20, boxY);
  ctx.lineTo(x + boxWidth - 20, boxY);
  ctx.quadraticCurveTo(x + boxWidth, boxY, x + boxWidth, boxY + 20);
  ctx.lineTo(x + boxWidth, boxY + boxHeight - 20);
  ctx.quadraticCurveTo(x + boxWidth, boxY + boxHeight, x + boxWidth - 20, boxY + boxHeight);
  ctx.lineTo(x + 20, boxY + boxHeight);
  ctx.quadraticCurveTo(x, boxY + boxHeight, x, boxY + boxHeight - 20);
  ctx.lineTo(x, boxY + 20);
  ctx.quadraticCurveTo(x, boxY, x + 20, boxY);
  ctx.closePath();
  ctx.fill();
  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2;
  ctx.stroke();

   // Draw logo if provided
   if (logoUrl) {
     const img = new Image();
     img.onload = function() {
       ctx.drawImage(img, x + 20, boxY + 20, 50, 50);
     };
     img.src = logoUrl;
   }
  // Draw section title
   ctx.fillStyle = "#fff";
ctx.font = "bold 24px Poppins";
ctx.textAlign = "center";
ctx.fillText(title, x + boxWidth / 2, boxY + 40);

const lines = list.split("\n");
ctx.font = "28px Poppins";

// Set text color based on section title
ctx.fillStyle = (title === "MTN") ? "#000" : "#fff";

let y = boxY + 80;
for (let line of lines) {
  ctx.fillText(line, x + boxWidth / 2, y);
  y += 30;
}

  }

  function drawFlyerContent(data) {
    ctx.fillStyle = "#007bff";
    ctx.font = "bold 48px Poppins";
    ctx.textAlign = "center";
    ctx.fillText(data.businessName.toUpperCase(), canvas.width / 2, 100);

    ctx.font = "italic 28px Poppins";
    ctx.fillStyle = "#fff";
    ctx.fillText("Data, and AFA subscriptions", canvas.width / 2, 140);

    drawSection(ctx, "MTN", data.mtnList, 50, "#ffc800");
    drawSection(ctx, "AT", data.atList, 400, "#0c0c9c");
    drawSection(ctx, "Telecel", data.telecelList, 750, "#d00000");

    ctx.fillStyle = "#0033cc";
    ctx.fillRect(200, 840, canvas.width, 50);
    ctx.fillStyle = "#fff";
    ctx.font = "bold 30px Poppins";
    ctx.fillText("üöÄFast Delivery Plus Trusted Service", canvas.width / 2, 870);

    ctx.fillStyle = "#001f3f";
    ctx.fillRect(120, 890, canvas.width, 60);
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(230, 920, 8, 0, Math.PI * 2);
    ctx.fill();
    ctx.fillStyle = "#fff";
    ctx.font = "30px monospace";
    ctx.fillText("Payment Details - üö®", 320, 920);
    ctx.fillText(`${data.mobileNumber} ${data.accountName}`, canvas.width / 2 + 170, 925);

    ctx.fillStyle = "#fff";
    ctx.fillRect(0, 960, 400, 50);
    ctx.fillStyle = "#000";
    ctx.font = "bold 32px Poppins";
    ctx.fillText("üñ•Ô∏èüìû", 80, 990);
    ctx.fillText(data.mobileNumber, 230, 995);

    ctx.fillStyle = "#ff0";
    ctx.font = "bold 24px Poppins";
    ctx.fillText(`AFA REGISTRATION\n GHS ${data.afaPrice}`, 850, 990);

    const imageDataUrl = canvas.toDataURL();
const filename = `${data.businessName}_flyer.png`;

setTimeout(() => {
  const confirmDownload = confirm("Do you want to download your flyer?");
  if (confirmDownload) {
    const a = document.createElement("a");
    a.href = imageDataUrl;
    a.download = filename;
    a.click();
  } else {
    // Go back to editing
    document.getElementById("flyerForm").style.display = "block";
    canvas.style.display = "none";
    document.getElementById("downloadLink").style.display = "none";
  }
}, 300); // Give a tiny delay so rendering completes before asking

  }

  document.getElementById("flyerForm").addEventListener("submit", function (e) {
  e.preventDefault();

  // Hide the form and show the canvas
  document.getElementById("flyerForm").style.display = "none";
  canvas.style.display = "block";
  document.getElementById("downloadLink").style.display = "block";


    const data = {
      businessName: document.getElementById("businessName").value,
      mobileNumber: document.getElementById("mobileNumber").value,
      accountName: document.getElementById("accountName").value,
      afaPrice: document.getElementById("afaPrice").value,
      mtnList: document.getElementById("mtnList").value,
      atList: document.getElementById("atList").value,
      telecelList: document.getElementById("telecelList").value,
    };

    const bgType = document.getElementById("bgType").value;

    if (bgType === "image") {
      const bgImageInput = document.getElementById("bgImage");
      if (bgImageInput.files && bgImageInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const img = new Image();
          img.onload = function () {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            drawFlyerContent(data);
          };
          img.src = e.target.result;
        };
        reader.readAsDataURL(bgImageInput.files[0]);
      } else {
        alert("Please upload a background image.");
      }
    } else {
      const startColor = document.getElementById("startColor").value;
      const endColor = document.getElementById("endColor").value;
      const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
      gradient.addColorStop(0, startColor);
      gradient.addColorStop(1, endColor);
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      drawFlyerContent(data);
    }
  });
  
     document.getElementById("mtnList").value = 
  "1GB - 7.00\n" +
  "2GB - 13.50\n" +
  "3GB - 19.00\n" +
  "4GB - 25.00\n" +
  "5GB - 29.00\n" +
  "6GB - 35.00\n" +
  "8GB - 48.00\n" +
  "10GB - 54.00\n" +
  "15GB - 78.00\n" +
  "20GB - 98.00\n" +
  "25GB - 124.00\n" +
  "30GB - 140.00\n" +
  "40GB - 190.00\n";

document.getElementById("atList").value = 
  "1GB - 5.00\n" +
  "2GB - 10.00\n" +
  "3GB - 15.00\n" +
  "4GB - 20.00\n" +
  "5GB - 25.00\n" +
  "6GB - 30.00\n" +
  "8GB - 40.00\n" +
  "10GB - 48.00\n" +
  "15GB - 68.00\n" +
  "20GB - 80.00\n" +
  "25GB - 95.00\n" +
  "30GB - 110.00\n" +
  "50GB - 180.00";

document.getElementById("telecelList").value = 
  "5GB - 26.00\n" +
  "10GB - 40.50\n" +
  "15GB - 63.00\n" +
  "20GB - 80.00\n" +
  "25GB - 93.00\n" +
  "30GB - 110.00\n" +
  "50GB - 180.00\n" +
  "100GB - 340.00";
  
  document.getElementById("bgType").addEventListener("change", function () {
  const gradientOptions = document.getElementById("gradientOptions");
  const imageOptions = document.getElementById("imageOptions");
  if (this.value === "image") {
    gradientOptions.style.display = "none";
    imageOptions.style.display = "block";
  } else {
    gradientOptions.style.display = "block";
    imageOptions.style.display = "none";
  }
});

  function autoResize(textarea) {
      textarea.style.height = "auto"; // Reset the height
      textarea.style.height = textarea.scrollHeight + "px"; // Set it to content height
    }

    // Optional: trigger resize on page load if there's pre-filled content
    document.querySelectorAll('textarea').forEach(t => autoResize(t));
    const direction = document.getElementById("gradientDirection").value;
let gradient;

if (direction === "horizontal") {
  gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
} else if (direction === "diagonal") {
  gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
} else {
  gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
}
gradient.addColorStop(0, startColor);
gradient.addColorStop(1, endColor);

 </script>
</body>
</html>
